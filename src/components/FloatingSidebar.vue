<template>
  <div class="row justify-content-start">
    <div id="sideBar" class="col-3">
      <div class="btn-center mt-4">
        <svg
          @click="openLastEvents('lastEvents')"
          fill="#000000"
          type="button"
          width="80px"
          height="80px"
          viewBox="0 0 846.66 846.66"
          style="
            shape-rendering: geometricPrecision;
            text-rendering: geometricPrecision;
            image-rendering: optimizeQuality;
            fill-rule: evenodd;
            clip-rule: evenodd;
          "
          version="1.1"
          xml:space="preserve"
          xmlns="http://www.w3.org/2000/svg"
          xmlns:xlink="http://www.w3.org/1999/xlink"
        >
          <g id="Layer_x0020_1">
            <path
              class="fil0"
              d="M652.73 649.32l0 166.42c0,18.73 -22.85,27.54 -35.55,14.29l-196.15 -180.71 -165.38 0c-51.56,0 -93.66,-42.1 -93.66,-93.66l0 -360.47c0,-51.55 42.1,-93.65 93.66,-93.65l469.97 0c51.56,0 93.66,42.09 93.66,93.65l0 360.47c0,51.56 -42.1,93.66 -93.66,93.66l-72.89 0zm-334.34 -322.96c19.53,0 35.36,15.83 35.36,35.36 0,19.53 -15.83,35.36 -35.36,35.36 -19.53,0 -35.36,-15.83 -35.36,-35.36 0,-19.53 15.83,-35.36 35.36,-35.36zm344.49 0c19.53,0 35.36,15.83 35.36,35.36 0,19.53 -15.83,35.36 -35.36,35.36 -19.53,0 -35.36,-15.83 -35.36,-35.36 0,-19.53 15.83,-35.36 35.36,-35.36zm-114.83 0c19.53,0 35.36,15.83 35.36,35.36 0,19.53 -15.83,35.36 -35.36,35.36 -19.53,0 -35.36,-15.83 -35.36,-35.36 0,-19.53 15.83,-35.36 35.36,-35.36zm-114.83 0c19.53,0 35.36,15.83 35.36,35.36 0,19.53 -15.83,35.36 -35.36,35.36 -19.53,0 -35.36,-15.83 -35.36,-35.36 0,-19.53 15.83,-35.36 35.36,-35.36zm-312.18 190.39c27.16,0 27.16,41.31 0,41.31 -51.56,0 -93.66,-42.1 -93.66,-93.66l0 -360.47c0,-51.55 42.1,-93.65 93.66,-93.65l469.98 0c27.16,0 27.16,41.3 0,41.3l-469.98 0c-28.75,0 -52.35,23.6 -52.35,52.35l0 360.47c0,28.75 23.6,52.35 52.35,52.35zm490.39 251.94l0 -140.03c0,-11.4 9.25,-20.65 20.65,-20.65l93.54 0c28.75,0 52.36,-23.6 52.36,-52.35l0 -360.47c0,-28.75 -23.61,-52.35 -52.36,-52.35l-469.97 0c-28.76,0 -52.36,23.6 -52.36,52.35l0 360.47c0,28.75 23.6,52.35 52.36,52.35l173.38 0.05c4.99,0 10,1.79 13.96,5.44l168.44 155.19z"
            />
          </g>
        </svg>
      </div>
      <div class="btn-center">
        <p>אירועים אחרונים</p>
      </div>
      <div class="btn-center mt-4 size-4">
        <svg
          @click="openComponent('addNewEvent')"
          type="button"
          width="80px"
          height="80px"
          viewBox="0 0 24 24"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M3 4.281v16.437A1.282 1.282 0 0 0 4.281 22h16.437A1.282 1.282 0 0 0 22 20.718V4.281A1.281 1.281 0 0 0 20.719 3H4.28A1.281 1.281 0 0 0 3 4.281zM20.719 4a.281.281 0 0 1 .281.281V20.72a.281.281 0 0 1-.281.281H4.28a.281.281 0 0 1-.28-.282V4.28A.281.281 0 0 1 4.281 4zM12 13H7v-1h5V7h1v5h5v1h-5v5h-1z"
          />
          <path fill="none" d="M0 0h24v24H0z" />
        </svg>
      </div>
      <div class="btn-center">
        <p>הוספת אירוע</p>
      </div>
      <div class="btn-center mt-4 size-4">
        <svg
          @click="openComponent('pastEvents')"
          type="button"
          width="80px"
          height="80px"
          viewBox="0 0 1024 1024"
          fill="#000000"
          class="icon"
          version="1.1"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M983.938 975.94H40.06C18 975.94 0.066 958.004 0.066 935.946V360.02c0-22.052 17.934-39.994 39.994-39.994h943.876c22.06 0 39.996 17.942 39.996 39.994v575.926c0.002 22.058-17.934 39.994-39.994 39.994zM40.06 336.024c-13.232 0-23.996 10.764-23.996 23.996v575.926c0 13.232 10.764 23.996 23.996 23.996h943.876c13.234 0 23.998-10.764 23.998-23.996V360.02c0-13.232-10.764-23.996-23.998-23.996H40.06z"
            fill=""
          />
          <path
            d="M679.976 719.972H344.022c-17.638 0-31.996-14.342-31.996-31.996v-47.994c0-17.654 14.358-31.996 31.996-31.996 17.654 0 31.996 14.342 31.996 31.996v15.998h271.964v-15.998c0-17.654 14.358-31.996 31.994-31.996 17.656 0 31.996 14.342 31.996 31.996v47.994c0 17.654-14.34 31.996-31.996 31.996z m-335.954-95.988c-8.812 0-15.998 7.188-15.998 15.998v47.994c0 8.812 7.186 15.998 15.998 15.998h335.956c8.828 0 16-7.186 16-15.998v-47.994c0-8.81-7.172-15.998-16-15.998-8.81 0-15.996 7.188-15.996 15.998v23.998a7.994 7.994 0 0 1-8 7.998H368.018a7.994 7.994 0 0 1-7.998-7.998v-23.998c0-8.81-7.172-15.998-15.998-15.998zM72.056 304.028c-4.422 0-8-3.578-8-8v-31.996c0-4.42 3.578-7.998 8-7.998s8 3.578 8 7.998v31.996c0 4.422-3.578 8-8 8z"
            fill=""
          />
          <path
            d="M951.942 272.032H72.056c-4.422 0-8-3.578-8-8a7.994 7.994 0 0 1 8-7.998H951.94c4.422 0 8 3.578 8 7.998a7.992 7.992 0 0 1-7.998 8z"
            fill=""
          />
          <path
            d="M951.942 304.028a7.994 7.994 0 0 1-7.998-8v-31.996a7.994 7.994 0 0 1 7.998-7.998c4.422 0 8 3.578 8 7.998v31.996c0 4.422-3.578 8-8 8zM951.942 208.04H328.024a7.996 7.996 0 0 1-5.656-2.344l-45.65-45.65H128.048v39.996a7.994 7.994 0 0 1-7.998 7.998H72.056c-4.422 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8h39.994V152.046c0-4.422 3.578-8 8-8h159.978c2.124 0 4.156 0.844 5.656 2.344l45.65 45.65H951.94c4.422 0 8 3.578 8 8 0.002 4.42-3.576 8-7.998 8z"
            fill=""
          />
          <path
            d="M951.942 240.036a7.994 7.994 0 0 1-7.998-8v-31.994c0-4.422 3.578-8 7.998-8 4.422 0 8 3.578 8 8v31.994c0 4.422-3.578 8-8 8zM72.056 240.036c-4.422 0-8-3.578-8-8v-31.994c0-4.422 3.578-8 8-8s8 3.578 8 8v31.994c0 4.422-3.578 8-8 8zM903.95 240.036H120.05c-4.422 0-8-3.578-8-8a7.994 7.994 0 0 1 8-7.998h783.898a7.994 7.994 0 0 1 7.998 7.998 7.99 7.99 0 0 1-7.996 8zM903.95 160.044H328.024c-4.422 0-8-3.578-8-7.998 0-4.422 3.578-8 8-8h575.926a7.994 7.994 0 0 1 7.998 8 7.994 7.994 0 0 1-7.998 7.998z"
            fill=""
          />
          <path
            d="M903.95 176.042c-4.422 0-8-3.578-8-7.998v-15.998c0-4.422 3.578-8 8-8s7.998 3.578 7.998 8v15.998a7.994 7.994 0 0 1-7.998 7.998zM903.95 96.052H376.018a8.004 8.004 0 0 1-4.438-1.342l-45.978-30.652h-149.56v23.996a7.994 7.994 0 0 1-8 7.998H120.05c-4.422 0-8-3.576-8-7.998s3.578-7.998 8-7.998h39.994V56.058a7.994 7.994 0 0 1 8-7.998h159.98c1.578 0 3.124 0.468 4.438 1.344l45.978 30.652h525.51c4.422 0 7.998 3.576 7.998 7.998s-3.576 7.998-7.998 7.998z"
            fill=""
          />
          <path
            d="M903.95 128.048c-4.422 0-8-3.576-8-7.998V88.054c0-4.422 3.578-7.998 8-7.998s7.998 3.576 7.998 7.998v31.996a7.992 7.992 0 0 1-7.998 7.998zM120.05 128.048c-4.422 0-8-3.576-8-7.998V88.054a7.994 7.994 0 0 1 8-7.998 7.994 7.994 0 0 1 7.998 7.998v31.996a7.992 7.992 0 0 1-7.998 7.998zM855.956 128.048H168.044c-4.42 0-8-3.576-8-7.998s3.578-8 8-8h687.912c4.42 0 7.998 3.578 7.998 8s-3.578 7.998-7.998 7.998zM56.058 895.95c-4.422 0-8-3.578-8-7.998V408.014c0-4.422 3.578-8 8-8s8 3.578 8 8v479.938a7.994 7.994 0 0 1-8 7.998zM967.942 895.95c-4.422 0-8-3.578-8-7.998V408.014c0-4.422 3.578-8 8-8a7.994 7.994 0 0 1 7.998 8v479.938a7.994 7.994 0 0 1-7.998 7.998z"
            fill=""
          />
        </svg>
      </div>
      <div class="btn-center">
        <p>אירועי עבר</p>
      </div>
    </div>
    <div v-if="show === 'addNewEvent'" class="col-3 mt-3">
      <new-event-component />
    </div>
    <div v-else-if="show === 'pastEvents'" class="col-3 mt-3">
      <filter-component />
    </div>
    <div v-else class="col-4 mt-3" id="lastEventsCom">
      <last-events :lastEvents="lastEventsList"/>
    </div>
    <div class="col-6 mt-3">
      <map-component />
    </div>
  </div>
</template>

<script>
import ExampleComponent from "./ExampleAddEvent.vue";
import EmptyComponent from "./Empty.vue";
import NewEventComponent from "./NewEventComponent.vue";
import FilterComponent from "./FilterComponent.vue"
import MapComponent from "./MapComponent.vue";
import LastEvents from './LastEvents.vue';
import api from "../../api/api.js";

export default {
    data() {
        return {
            show: null,
        }
    },
    components: {
        ExampleComponent,
        EmptyComponent,
        NewEventComponent,
        LastEvents,
        FilterComponent,
        MapComponent,
    },
    props: {
        lastEventsList : Array
    },
    methods: {
        openComponent(componentName) {
            this.show = componentName;
        },
         async openLastEvents(componentName){
          this.lastEventsList =  await (await api.events().getEvents()).data; 
          this.show = componentName;
        }
    },
}
</script>

<style scoped>
.side-button {
  font-size: 80px;
}
#lastEventsCom {
    width: 450px;
    margin-left: -100px;
}
#sideBar {
    margin-left: -50px;
    margin-top: 50px;
}
</style>

